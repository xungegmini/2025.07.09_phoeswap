tasks:
  - init: |
      echo "Start Gitpod setup..."
      rustup-init -y
      source "$HOME/.cargo/env"
      sh -c "$(curl -sSfL https://release.solana.com/v1.18.14/install)"
      export PATH="/home/gitpod/.local/share/solana/install/active_release/bin:${PATH}"
      cargo install avm --locked
      /home/gitpod/.cargo/bin/avm install 0.30.1
      /home/gitpod/.cargo/bin/avm use 0.30.1
      echo 'export PATH="/home/gitpod/.local/share/solana/install/active_release/bin:$HOME/.avm/bin:$HOME/.cargo/bin:$PATH"' >> ~/.bashrc
      npm install
    command: |
      source "$HOME/.cargo/env"
      echo "--------------------------------"
      echo "ŚRODOWISKO JEST GOTOWE."
      echo "Sprawdź poniższe wersje:"
      solana --version
      anchor --version
      echo "--------------------------------"

vscode:
  extensions:
    - rust-lang.rust-analyzer